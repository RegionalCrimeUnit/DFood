<!DOCTYPE html>
<html>
 <head> 
  <meta charset="utf-8" /> 
  <title>多鱼点餐系统</title> 
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" /> 
  <meta name="author" content="" /> 
  <!-- Le styles --> 
  <link href="file:///D|/phpStudy/WWW/2/css/bootstrap.css" rel="stylesheet" /> 
  <link href="file:///D|/phpStudy/WWW/2/css/buttons.css" rel="stylesheet" /> 
  <link href="file:///D|/phpStudy/WWW/2/css/flat.css" rel="stylesheet" />
  <link href="file:///D|/phpStudy/WWW/2/css/font-awesome.css" rel="stylesheet" />
  
  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --> 
  <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> 
  <!-- Le fav and touch icons --> 
 </head> 
<body> 

<div id="wrapper" class="viewer">

  <div id="sidebar-wrapper">
    <div class="well sidebar-nav">
          <nav id="J_menuList" class="nav nav-list">
      </nav>
      </div>
        
    </div>
    <div id="page-content-wrapper" class="">
        <div class="page-content">
            <div class="container" id="J_list_Container">
            </div>
        </div>
    </div>
    <footer class="footFix footLeft">
        <button id="myOrder" class="btn_change">
            下单
            <!--span class="num">9</span-->
        </button>
    </footer>
</div>
<div id="wrapper2" class="viewer wrapper countpage clearfix" style="display:none">
    <section class="order_title">
        <div class="container" id="">
            <div class="col-md-12 clearfix foot_orderList">
                <div class="row">
                    <div class="col-xs-6">
                        <p class="notice">
                           
                        </p>
                    </div>
                    <div class="col-xs-6">
                        <p class="notice tar">
                            <span class="price" id="price_txt">
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="oder_content">
        <div class="container" id="J_order_list">
        </div>
    </section>
    <section class="oder_submit">
        <div class="container">
            <button class="button button-rounded button-flat-action fr mgtbr8" id="submitOrder">
                下单
            </button>
        </div>
    </section>
</div>


<div id="loadingView" class="viewer">
    <div class="container">
        <div class="col-md-12 clearfix loading">
        </div>
    </div>
</div><!-- Le javascript
    ================================================== --> 
  <!-- Placed at the end of the document so the pages load faster --> 
  <script src="file:///D|/phpStudy/WWW/2/js/jquery.js"></script> 
  <script src="file:///D|/phpStudy/WWW/2/js/bootstrap.min.js"></script> 
  <script>
		var iG = iG||{};
        if(window.localStorage){
            try{
                iG = JSON.parse(localStorage["zaiG"])||{};
            }catch(e){
                localStorage.removeItem("zaiG");
                iG = iG||{};
            }
        }else{
            iG = iG||{};
        }
		$(function(){
			setTimeout(function () { window.scrollTo(0, 1); }, 0);		
            setTimeout(function () {
                iG.items={
            "●热卖产品":[
					{id:"1",name:"原味板烧鸡腿堡",cls:"热卖产品",price:"18",sels:"12",imageUrl:"images/1.jpg"},
					{id:"2",name:"麦趣鸡盒（含那么大鸡排）升级烧烤风味鸡翅",sels:"12",cls:"热卖产品",price:"81",imageUrl:"images/2.jpg"},
					{id:"3",name:"烧烤风味鸡翅",cls:"热卖产品",price:"11",sels:"12",imageUrl:"images/3.jpg"},
					{id:"4",name:"芒果派",cls:"热卖产品",price:"7",sels:"26",imageUrl:"images/4.jpg"},
					{id:"5",name:"3人豪情派对餐",cls:"热卖产品",price:"98",sels:"12",imageUrl:"images/5.jpg"},
					{id:"6",name:"麦乐家庭餐",cls:"热卖产品",price:"80",sels:"32",imageUrl:"images/6.jpg"}
                    ],
			"●主  食":[{id:"7",name:"经典麦辣鸡腿汉堡",cls:"主食",price:"17",sels:"12",imageUrl:"images/7.jpg"},
					{id:"8",name:"麦香鱼",cls:"主食",price:"17",sels:"112",imageUrl:"images/8.jpg"},
					{id:"9",name:"巨无霸",cls:"主食",price:"20",sels:"120",imageUrl:"images/9.jpg"},
					{id:"10",name:"培根蔬萃双层牛堡",cls:"主食",price:"21",sels:"8",imageUrl:"images/10.jpg"},
					{id:"11",name:"双层吉士汉堡",cls:"主食",price:"18",sels:"28",imageUrl:"images/11.jpg"},
					{id:"12",name:"吉士汉堡包",cls:"主食",price:"9.8",sels:"28",imageUrl:"images/12.jpg"}
                    ],
			"●小  食":[{id:"13",name:"小食纷享盒A",cls:"小食",price:"28",sels:"25",imageUrl:"images/13.jpg"},
					{id:"14",name:"烧烤风味鸡翅",cls:"小食",price:"11",sels:"32",imageUrl:"images/14.jpg"},
					{id:"15",name:"那么大鸡排",cls:"小食",price:"12",sels:"6",imageUrl:"images/15.jpg"},
					{id:"16",name:"麦辣鸡翅",cls:"小食",price:"10",sels:"42",imageUrl:"images/16.jpg"},
					{id:"17",name:"麦乐鸡",cls:"小食",price:"10",sels:"47",imageUrl:"images/17.jpg"},
					{id:"18",name:"美味鲜蔬杯",cls:"小食",price:"11",sels:"56",imageUrl:"images/18.jpg"},
					{id:"19",name:"薯条",cls:"小食",price:"7.5",sels:"62",imageUrl:"images/19.jpg"},
					{id:"20",name:"玉米杯",cls:"小食",price:"10",sels:"23",imageUrl:"images/20.jpg"}
                    ],
			"●超值套餐":[{id:"21",name:"那么大鸡排满碗饭",cls:"超值套餐",price:"23",sels:"24",imageUrl:"images/21.jpg"},
					{id:"22",name:"蜜汁鸡腿满碗饭",cls:"超值套餐",price:"21",sels:"14",imageUrl:"images/22.jpg"},
					{id:"23",name:"开心乐园餐（麦乐鸡）",cls:"超值套餐",price:"21",sels:"224",imageUrl:"images/23.jpg"}
                    ],
			"●甜  品":[{id:"24",name:"爆米花焦糖口味新地",cls:"甜品",price:"10.5",sels:"12",imageUrl:"images/24.jpg"},
					{id:"25",name:"爆米花口味奥利奥麦旋风",cls:"甜品",price:"10.5",sels:"16",imageUrl:"images/25.jpg"},
					{id:"26",name:"草莓麦旋风",cls:"甜品",price:"12.5",sels:"18",imageUrl:"images/26.jpg"},
					{id:"27",name:"巧克力新地",cls:"甜品",price:"9.5",sels:"19",imageUrl:"images/27.jpg"},
					{id:"28",name:"芒果派",cls:"甜品",price:"7.5",sels:"23",imageUrl:"images/28.jpg"},
					{id:"29",name:"香芋派",cls:"甜品",price:"7.5",sels:"30",imageUrl:"images/29.jpg"}
                    ],
			"●饮  品":[{id:"30",name:"（新）青柠口味奇乐酷",cls:"饮品",price:"11",sels:"12",imageUrl:"images/30.jpg"},
					{id:"31",name:"鲜煮咖啡",cls:"饮品",price:"9",sels:"16",imageUrl:"images/31.jpg"},
					{id:"32",name:"热朱古力",cls:"饮品",price:"10.5",sels:"18",imageUrl:"images/32.jpg"},
					{id:"33",name:"红茶",cls:"饮品",price:"10.5",sels:"19",imageUrl:"images/33.jpg"},
					{id:"34",name:"FUZE Tea柠檬红茶味饮料",cls:"饮品",price:"8",sels:"23",imageUrl:"images/34.jpg"},
					{id:"35",name:"美汁源阳光橙",cls:"饮品",price:"11",sels:"30",imageUrl:"images/35.jpg"}
                    ],					
	};
                init();//ajax成功后执行init(); 
            }, 20);//模拟ajax请求时间

  
			
	
			$("body").on("click","#addOrder",function(){
				$(".wrapper,#wrapper").removeClass("show");
				$(".wrapper,#wrapper").removeClass("hide");
				$("#wrapper").addClass("show");
				$("#wrapper2").addClass("hide");
			});
			$("body").on("click",".foot-img img",function(){
				$("#imgViewer img").attr("src",$(this).attr("src"));
				
				$("#imgViewer").show();
				var item = getIndex($(this).attr("data_id"));
				$("#J_imgInfo").html("<strong>"+ item.name +"</strong><span class=\"colred\">"+ item.price +"元/份</span><small>"+ item.sels +"人买过</small>");
				var img = new Image();
				img.src = $(this).attr("src");
				if(img.complete){
					$(".imgViewer_contain").css("max-width",img.width + "px")
					$("#imgViewer .imgViewer_contain").css("margin-top",$(window).height() / 2 - img.height / 2 + "px");
					img = null;
				}else{
					img.onload=function(){
						$(".imgViewer_contain").css("max-width",this.width + "px");
						$("#imgViewer .imgViewer_contain").css("margin-top",$(window).height() / 2 - img.height / 2 + "px");
						img = null;
					};
				}
			});
		
		});
        function init(){
            setMenu(iG.items);
			$("#J_list_Container").html(listManger(iG.items));
            $("#loadingView").addClass("hide");
        }
        
        function setMenu(_list){
            iG.menu = [];
            iG.indexMenu = (function(){
                var menu;
                var count = 0;
                for(var i in _list){
                    if(count===0){
                        menu =  i;
                    }
                    count++;
                    iG.menu.push(i);
                }
                return menu;
            })();
            buildMenu(iG.menu);
        }
        
        function buildMenu(_list){
            var menuHtml = "<dl>";
            var active;
            for(var i in _list){
                active = "";
                if(_list[i]===iG.indexMenu)active = "active";
                menuHtml += "<dd class=\""+active+"\"><a data_name=\""+ _list[i] +"\">"+ _list[i] +"</a></dd>"
            
            }
			menuHtml += "</dl>";
            $("#J_menuList").html(menuHtml);
        }
        
		function getIndex(_id){
            var indexList = iG.items[iG.indexMenu];
			for(var i in indexList){
				if(indexList[i].id===_id){
					return indexList[i]
				}
			}
		}

	
		function listManger(_list){
			var result = "";
			var listArr = [];
            var indexList = _list[iG.indexMenu];
			for(var i in indexList){
				listArr.push(indexList[i]);
				if(Math.floor(i/3)===0&&i>2){
					result += "<div class=\"row\">";
					result += buildList(listArr);
					result += "</div>";
					listArr = [];
				}
			}
			result += "<div class=\"row\">";
			result += buildList(listArr);
			result += "</div>";
			return result;
		}
		function buildList(_list){
			var result = "";
			for(var i in _list){
				result += "<div class=\"col-md-4 clearfix foot-items\"><div class=\"col-xs-4 foot-img\"><img src=\""+_list[i].imageUrl+"\" class=\"img-responsive\" alt=\"Responsive image\" data_id=\""+_list[i].id+"\" ></div><div class=\"col-xs-6 foot-info\"><p><strong>"+_list[i].name+"</strong></p><p class=\"colred\">"+_list[i].price+"元/份</p><p><small>"+_list[i].sels+"人买过</small></p></div><div class=\"col-xs-2 icons-pick foot-pick\"><div class=\"btn_wrap\"><button class=\"minus\" style=\"display: none;\"><strong></strong></button><i style=\"display: none;\">0</i><button class=\"list_add list_id_respone\" data_id=\""+_list[i].id+"\"><strong></strong></button><em class=\"fixBig  fake\"></em></div></div></div>"
				//<button ontouchstart=\"\" class=\"list_id_respone button button-circle button-flat-primary fa fa-plus\" data_id=\""+_list[i].id+"\"></button>	
			}
			return result;
		}
	</script>  
 </body>
</html>